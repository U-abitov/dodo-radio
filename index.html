<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>DODO FM</title>
<style>
  body {
    margin: 0;
    background-color: rgb(255, 78, 0);
    font-family: Arial, sans-serif;
    color: black;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    user-select: none;
  }
  #playerContainer {
    background: white;
    border-radius: 20px;
    padding: 30px 40px;
    box-shadow: 0 0 20px rgba(0,0,0,0.25);
    text-align: center;
    max-width: 600px;
    width: 90vw;
  }
  audio {
    display: none;
  }
  #controls {
    display: flex;
    justify-content: center;
    gap: 25px;
    margin-bottom: 15px;
  }
  button {
    background: transparent;
    border: 2.5px solid black;
    border-radius: 50%;
    width: 70px;
    height: 70px;
    color: black;
    font-size: 1.8rem;
    cursor: pointer;
    transition: background-color 0.25s, color 0.25s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  button:hover {
    background-color: black;
    color: white;
  }
  #shuffleBtn {
    color: black;
  }
  #shuffleBtn.active {
    color: rgb(255, 78, 0);
  }
  #timer {
    font-size: 1.5rem;
    letter-spacing: 0.05em;
    margin-bottom: 15px;
  }
  #logo {
    margin-top: 40px;
    max-width: 280px;
  }
  #progressContainer {
    background: #ddd;
    height: 6px;
    border-radius: 3px;
    cursor: pointer;
    margin-bottom: 15px;
  }
  #progressBar {
    background: rgb(255, 78, 0);
    height: 6px;
    border-radius: 3px;
    width: 0%;
    transition: width 0.1s linear;
  }
  /* Анимация звука */
  #audioAnimation {
    display: flex;
    justify-content: center;
    gap: 5px;
    margin-bottom: 10px;
  }
  .bar {
    width: 6px;
    height: 20px;
    background: rgb(255, 78, 0);
    animation: bounce 1s infinite;
    animation-timing-function: ease-in-out;
    border-radius: 2px;
  }
  .bar:nth-child(1) {
    animation-delay: 0s;
  }
  .bar:nth-child(2) {
    animation-delay: 0.15s;
  }
  .bar:nth-child(3) {
    animation-delay: 0.3s;
  }
  .bar:nth-child(4) {
    animation-delay: 0.45s;
  }
  .bar:nth-child(5) {
    animation-delay: 0.6s;
  }
  @keyframes bounce {
    0%, 100% {height: 20px;}
    50% {height: 40px;}
  }
  .hidden {
    visibility: hidden;
  }
  #currentTrackDisplay {
    font-weight: bold;
    font-size: 1.3rem;
    margin-bottom: 12px;
  }
</style>
</head>
<body>

<div id="playerContainer">
  <audio id="player" preload="auto"></audio>
  <div id="audioAnimation" class="hidden">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>
  <div id="currentTrackDisplay"></div>
  <div id="progressContainer">
    <div id="progressBar"></div>
  </div>
  <div id="timer">00:00 / 00:00</div>
  <div id="controls">
    <button id="prevBtn" title="Назад">&#9664;&#9664;</button>
    <button id="shuffleBtn" title="Перемешать">&#128256;</button>
    <button id="restartBtn" title="Заново">&#8635;</button>
    <button id="playPauseBtn" title="Плей/Пауза">&#9658;</button>
    <button id="nextBtn" title="Вперёд">&#9654;&#9654;</button>
  </div>
</div>

<img id="logo" src="logo.png" alt="DODO FM Лого">

<script>
  const musicCount = 57;
  const musics = [];
  for (let i = 1; i <= musicCount; i++) {
    musics.push(`music${i}.mp3`);
  }
  const trackNames = [
    "A birthday to remember",
    "Air",
    "All you need is joy",
    "Beyond the horizon",
    "Bring me back",
    "Broke me summer",
    "Bye now",
    "Bye now Marilyn",
    "Cassette and Tv",
    "Celebrate this day",
    "Cheerfull happiness",
    "Chris euphoria",
    "Chris euphoria",
    "Cloud nine",
    "Crowded room",
    "Dancing alone",
    "Dancing in the rain",
    "Deep chill lounge",
    "Everyday",
    "Everything to me",
    "We were young",
    "Gaslighting",
    "Happy tickle",
    "I’m a puppet on strings",
    "Improvisation",
    "I’d like to know",
    "I’m not the one",
    "Just juzz",
    "Amazing",
    "Life’s good",
    "Lisbon story",
    "Cosmos",
    "Cosmos",
    "Lost in the crowd",
    "Midnight city light",
    "Midnight coffee",
    "Midnight echoes",
    "Mission trap",
    "No means",
    "Old radio",
    "Only one I want",
    "On the dance floor",
    "Pics will stay",
    "Queen of the couch",
    "Ride with me",
    "Say less",
    "Shifting seasons",
    "Snowflakes",
    "Sunrise serenade",
    "The animal birthday",
    "The sea is calling",
    "Under the mistletoe",
    "Saxophone",
    "Woke up to the ocean",
    "You are my hope",
    "You don’t know it",
    "Your loss looks good"
  ];

  const ads = ['ad1.mp3', 'ad2.mp3'];
  let playlist = [];
  let adIndex = 0;
  for (let i = 0; i < musics.length; i++) {
    playlist.push(musics[i]);
    if ((i + 1) % 5 === 0 && i !== musics.length - 1) {
      playlist.push(ads[adIndex]);
      adIndex = (adIndex + 1) % ads.length;
    }
  }

  const player = document.getElementById('player');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const shuffleBtn = document.getElementById('shuffleBtn');
  const restartBtn = document.getElementById('restartBtn');
  const timer = document.getElementById('timer');
  const progressContainer = document.getElementById('progressContainer');
  const progressBar = document.getElementById('progressBar');
  const audioAnimation = document.getElementById('audioAnimation');
  const currentTrackDisplay = document.getElementById('currentTrackDisplay');

  let currentIndex = 0;
  let isPlaying = false;
  let isShuffle = false;
  let playedIndexes = [];

  function formatTime(sec) {
    const m = Math.floor(sec / 60).toString().padStart(2, '0');
    const s = Math.floor(sec % 60).toString().padStart(2, '0');
    return `${m}:${s}`;
 
